<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - FarmaLearn</title>
    
    <!-- Fontes -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- CSS Personalizado -->
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/mobile.css">
</head>
<body>
    <!-- Mobile Menu Toggle -->
    <div class="mobile-menu-toggle" id="mobile-menu-toggle">
        <i class="fas fa-bars"></i>
    </div>
    
    <!-- Theme Toggle -->
    <div class="theme-toggle" id="theme-toggle">
        <i class="fas fa-sun"></i>
    </div>
    
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="sidebar-logo">
                <img src="img/logo.png" alt="FarmaLearn Logo" id="logo-placeholder">
                <h1>FarmaLearn</h1>
            </div>
            <div class="sidebar-toggle" id="sidebar-toggle">
                <i class="fas fa-chevron-left"></i>
            </div>
        </div>
        
        <div class="sidebar-menu">
            <div class="menu-item active" data-page="dashboard">
                <div class="menu-icon"><i class="fas fa-tachometer-alt"></i></div>
                <div class="menu-text">Dashboard</div>
            </div>
            
            <div class="menu-item" data-page="flashcards">
                <div class="menu-icon"><i class="fas fa-clone"></i></div>
                <div class="menu-text">Flashcards</div>
            </div>
            
            <div class="menu-item" data-page="simulator">
                <div class="menu-icon"><i class="fas fa-comments"></i></div>
                <div class="menu-text">Simulador</div>
            </div>
            
            <div class="menu-item" data-toggle="categorias-submenu">
                <div class="menu-icon"><i class="fas fa-th-large"></i></div>
                <div class="menu-text">Categorias</div>
                <div class="menu-arrow"><i class="fas fa-chevron-right"></i></div>
            </div>
            <div class="submenu" id="categorias-submenu">
                <div class="submenu-item" data-page="respiratorios">
                    <div class="submenu-icon"><i class="fas fa-lungs"></i></div>
                    <div class="submenu-text">Respiratórios</div>
                </div>
                <div class="submenu-item" data-page="dermatologicos">
                    <div class="submenu-icon"><i class="fas fa-allergies"></i></div>
                    <div class="submenu-text">Dermatológicos</div>
                </div>
                <div class="submenu-item" data-page="digestivos">
                    <div class="submenu-icon"><i class="fas fa-pills"></i></div>
                    <div class="submenu-text">Digestivos</div>
                </div>
                <div class="submenu-item" data-page="dores">
                    <div class="submenu-icon"><i class="fas fa-head-side-virus"></i></div>
                    <div class="submenu-text">Dores</div>
                </div>
            </div>
            
            <div class="menu-item" data-page="estatisticas">
                <div class="menu-icon"><i class="fas fa-chart-bar"></i></div>
                <div class="menu-text">Estatísticas</div>
            </div>
            
            <div class="menu-item" data-page="conquistas">
                <div class="menu-icon"><i class="fas fa-trophy"></i></div>
                <div class="menu-text">Conquistas</div>
            </div>
            
            <div class="menu-item" data-page="configuracoes">
                <div class="menu-icon"><i class="fas fa-cog"></i></div>
                <div class="menu-text">Configurações</div>
            </div>
        </div>
        
        <div class="sidebar-footer">
            <div class="user-info">
                <div class="user-avatar" id="user-avatar">J</div>
                <div class="user-details">
                    <div class="user-name" id="user-name">Juliano</div>
                    <div class="user-role">Balconista</div>
                </div>
            </div>
            <div class="logout-btn" id="logout-btn">
                <i class="fas fa-sign-out-alt"></i>
            </div>
        </div>
    </div>
    
    <!-- Mobile Navigation -->
    <div class="mobile-nav">
        <div class="mobile-nav-items">
            <div class="mobile-nav-item active" data-page="dashboard">
                <div class="mobile-nav-icon"><i class="fas fa-tachometer-alt"></i></div>
                <div class="mobile-nav-text">Dashboard</div>
            </div>
            <div class="mobile-nav-item" data-page="flashcards">
                <div class="mobile-nav-icon"><i class="fas fa-clone"></i></div>
                <div class="mobile-nav-text">Flashcards</div>
            </div>
            <div class="mobile-nav-item" data-page="simulator">
                <div class="mobile-nav-icon"><i class="fas fa-comments"></i></div>
                <div class="mobile-nav-text">Simulador</div>
            </div>
            <div class="mobile-nav-item" data-page="estatisticas">
                <div class="mobile-nav-icon"><i class="fas fa-chart-bar"></i></div>
                <div class="mobile-nav-text">Estatísticas</div>
            </div>
            <div class="mobile-nav-item" data-page="perfil">
                <div class="mobile-nav-icon"><i class="fas fa-user"></i></div>
                <div class="mobile-nav-text">Perfil</div>
            </div>
        </div>
    </div>
    
    <!-- Main Content -->
    <div class="main-content" id="main-content">
        <div class="header">
            <h1 class="page-title">Dashboard</h1>
            <div class="header-actions">
                <div class="header-action">
                    <i class="fas fa-search"></i>
                </div>
                <div class="header-action">
                    <i class="fas fa-bell"></i>
                </div>
            </div>
        </div>
        
        <!-- Dashboard Grid -->
        <div class="dashboard-grid">
            <!-- Progresso Geral -->
            <div class="card card-sm">
                <div class="stats-icon primary">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="stats-card">
                    <div class="stats-label">Progresso Geral</div>
                    <div class="stats-value">35%</div>
                    <div class="stats-change positive">
                        <i class="fas fa-arrow-up"></i> 5% desde ontem
                    </div>
                    <div class="progress-container">
                        <div class="progress-info">
                            <span class="progress-label">Nível 2</span>
                            <span class="progress-percentage">35%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value primary" style="width: 35%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Flashcards Estudados -->
            <div class="card card-sm">
                <div class="stats-icon accent">
                    <i class="fas fa-clone"></i>
                </div>
                <div class="stats-card">
                    <div class="stats-label">Flashcards Estudados</div>
                    <div class="stats-value">42</div>
                    <div class="stats-change positive">
                        <i class="fas fa-arrow-up"></i> 12 novos hoje
                    </div>
                    <div class="progress-container">
                        <div class="progress-info">
                            <span class="progress-label">Meta Diária</span>
                            <span class="progress-percentage">84%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value accent" style="width: 84%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Simulações Completadas -->
            <div class="card card-sm">
                <div class="stats-icon success">
                    <i class="fas fa-comments"></i>
                </div>
                <div class="stats-card">
                    <div class="stats-label">Simulações Completadas</div>
                    <div class="stats-value">8</div>
                    <div class="stats-change positive">
                        <i class="fas fa-arrow-up"></i> 2 novas hoje
                    </div>
                    <div class="progress-container">
                        <div class="progress-info">
                            <span class="progress-label">Taxa de Acerto</span>
                            <span class="progress-percentage">75%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value success" style="width: 75%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Sequência de Dias -->
            <div class="card card-sm">
                <div class="stats-icon warning">
                    <i class="fas fa-fire"></i>
                </div>
                <div class="stats-card">
                    <div class="stats-label">Sequência de Dias</div>
                    <div class="stats-value">3</div>
                    <div class="stats-change">
                        <i class="fas fa-calendar-check"></i> Mantenha o ritmo!
                    </div>
                    <div class="progress-container">
                        <div class="progress-info">
                            <span class="progress-label">Recorde Pessoal</span>
                            <span class="progress-percentage">50%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-value warning" style="width: 50%"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Desempenho por Categoria -->
            <div class="card card-md">
                <div class="card-header">
                    <h3 class="card-title">Desempenho por Categoria</h3>
                    <div class="card-actions">
                        <div class="card-action">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="categoriasChart"></canvas>
                </div>
            </div>
            
            <!-- Progresso Recente -->
            <div class="card card-md">
                <div class="card-header">
                    <h3 class="card-title">Progresso Recente</h3>
                    <div class="card-actions">
                        <div class="card-action">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="progressoChart"></canvas>
                </div>
            </div>
            
            <!-- Atividades Recentes -->
            <div class="card card-md">
                <div class="card-header">
                    <h3 class="card-title">Atividades Recentes</h3>
                    <div class="card-actions">
                        <div class="card-action">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
                <div class="activity-list">
                    <div class="activity-item">
                        <div class="activity-icon primary">
                            <i class="fas fa-clone"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Completou 12 flashcards</div>
                            <div class="activity-subtitle">Categoria: Problemas Respiratórios</div>
                        </div>
                        <div class="activity-time">Hoje, 10:30</div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon accent">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Simulação concluída com sucesso</div>
                            <div class="activity-subtitle">Cenário: Atendimento para Dor de Cabeça</div>
                        </div>
                        <div class="activity-time">Hoje, 09:15</div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon success">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Conquista desbloqueada</div>
                            <div class="activity-subtitle">Especialista em Problemas Digestivos</div>
                        </div>
                        <div class="activity-time">Ontem, 16:45</div>
                    </div>
                    <div class="activity-item">
                        <div class="activity-icon warning">
                            <i class="fas fa-fire"></i>
                        </div>
                        <div class="activity-content">
                            <div class="activity-title">Sequência de 3 dias</div>
                            <div class="activity-subtitle">Continue estudando para aumentar sua sequência!</div>
                        </div>
                        <div class="activity-time">Hoje, 00:01</div>
                    </div>
                </div>
            </div>
            
            <!-- Desafios Diários -->
            <div class="card card-md">
                <div class="card-header">
                    <h3 class="card-title">Desafios Diários</h3>
                    <div class="card-actions">
                        <div class="card-action">
                            <i class="fas fa-ellipsis-v"></i>
                        </div>
                    </div>
                </div>
                <div class="quick-actions">
                    <div class="quick-action">
                        <div class="quick-action-icon primary">
                            <i class="fas fa-clone"></i>
                        </div>
                        <div class="quick-action-content">
                            <div class="quick-action-title">Estudar 15 flashcards</div>
                            <div class="quick-action-subtitle">Progresso: 12/15</div>
                        </div>
                    </div>
                    <div class="quick-action">
                        <div class="quick-action-icon accent">
                            <i class="fas fa-comments"></i>
                        </div>
                        <div class="quick-action-content">
                            <div class="quick-action-title">Completar 3 simulações</div>
                            <div class="quick-action-subtitle">Progresso: 2/3</div>
                        </div>
                    </div>
                    <div class="quick-action">
                        <div class="quick-action-icon success">
                            <i class="fas fa-th-large"></i>
                        </div>
                        <div class="quick-action-content">
                            <div class="quick-action-title">Estudar categoria Digestivos</div>
                            <div class="quick-action-subtitle">Não iniciado</div>
                        </div>
                    </div>
                    <div class="quick-action">
                        <div class="quick-action-icon warning">
                            <i class="fas fa-star"></i>
                        </div>
                        <div class="quick-action-content">
                            <div class="quick-action-title">Revisar flashcards difíceis</div>
                            <div class="quick-action-subtitle">Não iniciado</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script type="module">
        import LoginSystem from './js/login.js';
        import ThemeManager from './js/theme.js';
        
        document.addEventListener('DOMContentLoaded', function() {
            // Inicializar sistema de login
            const loginSystem = new LoginSystem();
            loginSystem.requireLogin();
            loginSystem.updateUserInterface();
            
            // Inicializar gerenciador de tema
            const themeManager = new ThemeManager();
            themeManager.initThemeToggle();
            
            // Toggle da sidebar
            const sidebarToggle = document.getElementById('sidebar-toggle');
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.getElementById('main-content');
            
            sidebarToggle.addEventListener('click', function() {
                sidebar.classList.toggle('collapsed');
            });
            
            // Toggle do menu mobile
            const mobileMenuToggle = document.getElementById('mobile-menu-toggle');
            
            mobileMenuToggle.addEventListener('click', function() {
                sidebar.classList.toggle('active');
            });
            
            // Submenu toggle
            const menuItemsWithSubmenu = document.querySelectorAll('.menu-item[data-toggle]');
            
            menuItemsWithSubmenu.forEach(item => {
                item.addEventListener('click', function() {
                    const submenuId = this.getAttribute('data-toggle');
                    const submenu = document.getElementById(submenuId);
                    
                    this.classList.toggle('expanded');
                });
            });
            
            // Navegação
            const menuItems = document.querySelectorAll('.menu-item[data-page], .mobile-nav-item[data-page]');
            
            menuItems.forEach(item => {
                item.addEventListener('click', function() {
                    const page = this.getAttribute('data-page');
                    
                    if (page === 'flashcards') {
                        window.location.href = 'flashcards.html';
                    } else if (page === 'simulator') {
                        window.location.href = 'simulador.html';
                    }
                    
                    // Atualizar item ativo
                    document.querySelectorAll('.menu-item, .mobile-nav-item').forEach(el => {
                        el.classList.remove('active');
                    });
                    
                    document.querySelectorAll(`.menu-item[data-page="${page}"], .mobile-nav-item[data-page="${page}"]`).forEach(el => {
                        el.classList.add('active');
                    });
                });
            });
            
            // Logout
            const logoutBtn = document.getElementById('logout-btn');
            
            logoutBtn.addEventListener('click', function() {
                loginSystem.logout();
            });
            
            // Inicializar gráficos
            const categoriasCtx = document.getElementById('categoriasChart').getContext('2d');
            const progressoCtx = document.getElementById('progressoChart').getContext('2d');
            
            // Gráfico de categorias
            new Chart(categoriasCtx, {
                type: 'radar',
                data: {
                    labels: ['Respiratórios', 'Dermatológicos', 'Digestivos', 'Dores', 'Outros'],
                    datasets: [{
                        label: 'Domínio por Categoria',
                        data: [75, 60, 85, 40, 30],
                        backgroundColor: 'rgba(30, 132, 73, 0.2)',
                        borderColor: 'rgba(30, 132, 73, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(30, 132, 73, 1)',
                        pointBorderColor: '#fff',
                        pointHoverBackgroundColor: '#fff',
                        pointHoverBorderColor: 'rgba(30, 132, 73, 1)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                display: false
                            },
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            angleLines: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            pointLabels: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    family: 'Poppins'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        }
                    }
                }
            });
            
            // Gráfico de progresso
            new Chart(progressoCtx, {
                type: 'line',
                data: {
                    labels: ['Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                    datasets: [{
                        label: 'Flashcards Estudados',
                        data: [5, 12, 8, 15, 10, 20, 12],
                        backgroundColor: 'rgba(30, 132, 73, 0.2)',
                        borderColor: 'rgba(30, 132, 73, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }, {
                        label: 'Simulações Completadas',
                        data: [1, 2, 1, 3, 0, 2, 2],
                        backgroundColor: 'rgba(52, 152, 219, 0.2)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 2,
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    family: 'Poppins'
                                }
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.1)'
                            },
                            ticks: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    family: 'Poppins'
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            labels: {
                                color: 'rgba(255, 255, 255, 0.7)',
                                font: {
                                    family: 'Poppins'
                                }
                            }
                        }
                    }
                }
            });
            
            // Gerar logo placeholder se a imagem não existir
            const logoPlaceholder = document.getElementById('logo-placeholder');
            logoPlaceholder.onerror = function() {
                this.onerror = null;
                this.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNNDAgMTBDMjMuNDMgMTAgMTAgMjMuNDMgMTAgNDBDMTAgNTYuNTcgMjMuNDMgNzAgNDAgNzBDNTYuNTcgNzAgNzAgNTYuNTcgNzAgNDBDNzAgMjMuNDMgNTYuNTcgMTAgNDAgMTBaIiBmaWxsPSIjMUU4NDQ5Ii8+PHBhdGggZD0iTTUwIDI1TDMwIDQwTDUwIDU1VjI1WiIgZmlsbD0iIzM0OThEQiIvPjwvc3ZnPg==';
            };
        });
    </script>
</body>
</html>
